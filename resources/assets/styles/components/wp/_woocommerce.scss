/**
 * Product gallery
 */
.woocommerce-product-gallery {
  $woocommerce-gallery-gutter: 0.5rem !default;

  &__wrapper {
    margin-right: -$woocommerce-gallery-gutter;
    width: calc(100% + #{$woocommerce-gallery-gutter});
  }

  &__image {
    &,
    &--placeholder {
      padding-right: 0.5rem;
      vertical-align: top;
    }

    &:nth-child(n+2) {
      width: 25%;
      display: inline-block;
      padding-top: 0.5rem;
    }
  }
}

/**
 * Messages
 */
.woocommerce-message,
.woocommerce-error,
.woocommerce-notice,
.woocommerce-info {
  list-style-type: none;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .button {
    order: 2;
  }

  @include callout;
}

.woocommerce-notice--success,
.woocommerce-info,
.woocommerce-message { @include callout-style(get-color(success)); }
.woocommerce-error { @include callout-style(get-color(alert)); }

/**
 * Shop page.
 */
.woocommerce {
  &-result-count {
    float: left;
  }

  &-ordering {
    float: right;
  }
}

/**
 * Product page.
 */
.woocommerce {
  // Quantity field
  .quantity {
    float: left;

    .qty {
      width: 3.631em;
      text-align: center;
    }
  }

  // Add to cart including quantity, variations, groups, buttons etc.
  form.cart {
    @include clearfix;
  }

  // Variation and group choices.
  table.variations,
  table.group_table {
    margin-left: (-1 * get-side($table-padding, left));

    select {
      width: auto;
      margin-bottom: 0;
    }

    tbody,
    thead,
    tfoot,
    tr {
      border: 0;
    }

    td.label {
      display: table-cell;
      color: inherit;
      background-color: transparent;
      font-size: 1rem;

      label { font-size: inherit; }
    }

    .reset_variations {
      margin-left: $global-margin;
    }

    .button {
      @extend %u-button--secondary;
    }
  }
}

/**
 * General tables
 */
.woocommerce table {
  .button,
  .input-text {
    margin-bottom: 0 !important; // override any @extend margin.
  }

  tbody {
    @include -zf-table-unstripe();
  }

  th {
    text-align: left;
  }
}

/**
 * Cart page
 */
.woocommerce {
  // Remove product from cart
  a.remove {
    display: block;
    font-size: 1.5em;
    height: 1em;
    width: 1em;
    text-align: center;
    line-height: 1;
    border-radius: 100%;
    color: get-color(alert) !important;
    text-decoration: none;
    font-weight: 700;
    border: 0;
  }

  &-cart table.cart {
    // Thumbnail
    img {
      width: 32px;
    }

    // Coupon and submit row.
    .actions {
      text-align: right;

      .button {
        @extend %u-button--secondary;
      }
    }

    // Coupon
    .coupon {
      display: flex;
      float: left;

      label { display: none; }
      .input-text { width: 80px; }
    }
  }

  small.tax_label {
    color: $dark-gray;
  }

  .cart_totals {
    @include breakpoint(medium) {
      width: 50%;
      float: right;
    }

    .checkout-button {
      display: block;
      padding-top: 1rem;
      padding-bottom: 1rem;
      font-size: 1.5rem;
    }
  }
}

/**
 * Cart widget
 */
.woocommerce-mini-cart {
  list-style-type: none;
  margin-bottom: 0;

  @at-root {
    .widget_shopping_cart_content {
      @include card-container;
    }
  }

  &__total,
  &__buttons {
    margin-left: 0;
    margin-right: 0;
    justify-content: center;
  }

  @include card-section;

  &__total {
    @include card-divider;

    .amount {
      margin-left: 0.3em;
      margin-right: 0.3em;
    }
  }

  &__buttons {
    @include card-section;
  }

  &-item {
    position: relative;

    @include clearfix;

    img {
      float: right;
      width: 32px;
    }

    a.remove {
      position: absolute;
      top: 0.25em;
      left: -($list-side-margin);
      opacity: 1;
      font-size: 1rem;
    }

    .variation {
      font-size: $small-font-size;
    }

    .quantity {
      display: block;
      font-size: $small-font-size;
    }
  }

  &__buttons {
    display: flex;

    .button {
      margin-bottom: 0;
    }
  }
}

/**
 * Checkout page.
 */
.woocommerce {
  // Multiple column layout
  @include breakpoint(medium) {
    .col2-set {
      @include xy-grid;
      @include xy-grid-layout(2, '.col-1, .col-2', false, $gutter-type: margin);
      @include xy-gutters($negative: true);
    }

    .col-1,
    .col-2 {
      @include xy-gutters;
    }
  }

  // Form row elements
  .form-row {
    // Margin exists on the row due to it being a paragraph.
    .input-text {
      margin-bottom: 0;
    }

    &-first,
    &-last {
      float: left;

      @include xy-cell-static(6, false, $gutter-type: padding);
    }

    &-first {
      @include xy-gutters($gutter-position: right, $gutter-type: padding);
    }

    &-last {
      @include xy-gutters($gutter-position: left, $gutter-type: padding);
    }

    &-wide {
      @include clearfix;
    }
  }

  // Input required attr
  form .required {
    color: get-color(alert);
    border: 0;
    font-weight: $global-weight-bold;
  }

  // Payment selection
  &-checkout-payment {
    @include card-container;

    .methods {
      @include card-section;

      list-style-type: none;
      margin-left: 0; // ul indent
      margin-bottom: 0;
    }

    // Place order container
    .place-order {
      @include card-divider;

      justify-content: flex-end;
    }
  }
}

// Order recieved
.woocommerce {
  // Overview
  &-order-overview {
    @include menu-base;

    li {
      padding-right: $global-margin;
      margin-right: $global-margin;
      border-right: 1px dashed #d3ced2;
      font-size: $small-font-size;
      text-transform: uppercase;

      &:last-of-type {
        padding-right: 0;
        margin-right: 0;
        border-right: 0;
      }

      strong {
        display: block;
        font-size: 1rem;
        text-transform: none;
      }
    }
  }

  &-order-details {
    margin-top: $global-margin;
  }
}

/**
 * Login form
 */
.woocommerce-form-login {
  .button {
    margin-right: $global-margin;
  }

  .inline {
    display: inline-block;
  }
}

/**
 * My account page.
 */
.woocommerce-MyAccount {
  &-navigation {
    @include breakpoint(medium) {
      @include xy-cell-static(3, false, $gutter-type: padding);
      @include xy-gutters($gutter-position: right, $gutter-type: padding);

      float: left;
    }

    ul {
      @include menu-base;
      @include menu-direction(vertical);
    }
  }

  &-content {
    @include xy-cell-static(9, false, $gutter-type: padding);
    @include xy-gutters($gutter-position: left, $gutter-type: padding);

    float: left;
  }
}

/**
 * Star ratings.
 */
.star-rating {
  float: right;
  overflow: hidden;
  position: relative;
  height: 1em;
  line-height: 1;
  font-size: 1em;
  width: 4.65em;
  font-family: 'FontAwesome';

  &::before {
    content: '#{$fa-var-star-empty}#{$fa-var-star-empty}#{$fa-var-star-empty}#{$fa-var-star-empty}#{$fa-var-star-empty}';
    color: $primary-color;
    float: left;
    top: 0;
    left: 0;
    position: absolute;
  }

  span {
    overflow: hidden;
    float: left;
    top: 0;
    left: 0;
    position: absolute;
    padding-top: 1.5em;

    &::before {
      content: '#{$fa-var-star}#{$fa-var-star}#{$fa-var-star}#{$fa-var-star}#{$fa-var-star}';
      top: 0;
      position: absolute;
      left: 0;
    }
  }
}

p.stars {
  a {
    position: relative;
    height: 1em;
    width: 1em;
    text-indent: -999em;
    display: inline-block;
    text-decoration: none;

    &::before {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 1em;
      height: 1em;
      line-height: 1;
      font-family: 'FontAwesome';
      content: '#{$fa-var-star-empty}';
      text-indent: 0;
    }

    &:hover ~ a::before { content: '#{$fa-var-star-empty}'; }
  }

  &:hover {
    a::before { content: '#{$fa-var-star}'; }
  }

  &.selected {
    a.active {
      &::before { content: '#{$fa-var-star}'; }
      ~ a::before { content: '#{$fa-var-star-empty}'; }
    }

    a:not(.active)::before { content: '#{$fa-var-star}'; }
  }
}
